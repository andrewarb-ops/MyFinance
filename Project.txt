С учётом текущего состояния (новый светлый layout, карточки счетов, скрипт очистки БД) актуальная версия Project.txt должна выглядеть примерно так. Ты можешь просто заменить содержимое файла на этот текст.

Проект: личный финтрегер с REST‑API на FastAPI, БД SQLite/SQLAlchemy и фронтендом на React + Vite + TypeScript + Tailwind CSS.

Назначение
Личный учёт финансов: счета, доходы/расходы и бюджеты. Бэкенд предоставляет JSON‑API поверх SQLite‑базы (слоистая архитектура: API‑роутеры → сервисный слой → ORM/БД). Фронт — дашборд‑интерфейс в современном финтех‑стиле: светлая тема, левый сайдбар, карточки метрик и списки транзакций.

Статус проекта

Бэкенд реализован: модели, сервисы, роутеры /accounts, /categories, /transactions, HTML‑view /db_view.

БД и миграции Alembic настроены.

Добавлен служебный скрипт очистки БД (scripts/clear_db.py), удаляющий все данные из таблиц transactions, budgets, accounts, categories.

Фронтенд: создан Vite‑проект в frontend/, настроен Tailwind. Реализован новый светлый layout с левым сайдбаром и верхним баром, страницы Dashboard, Accounts, Categories, Transactions.

Страница Accounts переписана: вместо таблицы — сетка карточек счетов (название, тип, валюта, статус).

В PyCharm настроены конфигурации backend (uvicorn, main:app) и frontend (npm run dev), а также compound‑конфигурация backend+frontend для одновременного запуска.

Структура бэкенда (корень репозитория)

main.py

создаёт приложение FastAPI (app = FastAPI(...));

подключает роутеры api.accounts, api.categories, api.transactions;

настраивает Jinja2Templates(directory="templates");

реализует /db_view для отображения таблиц БД как HTML.

api/ — слой API (FastAPI‑роутеры + Pydantic‑схемы):

api/accounts.py — роутер /accounts;

api/categories.py — роутер /categories;

api/transactions.py — роутер /transactions;

api/schemas.py — Pydantic‑модели запросов/ответов.

services/ — бизнес‑логика (работа с Session, правила операций):

services/accounts.py — операции над счетами;

services/categories.py — операции над категориями;

services/transactions.py — доход, расход, перевод, знаки сумм и пара проводок для переводов.

models/ — ORM‑модели SQLAlchemy:

models/account.py — модель счёта;

models/category.py — модель категории;

models/transaction.py — модель транзакции;

models/budget.py — модель бюджета.

db/ — инфраструктура БД:

db/base.py — engine, SessionLocal, Base = declarative_base;

db/__init__.py — session_scope и зависимости для FastAPI.

migrations/ — Alembic‑миграции, включая init_schema.

templates/db_view.html — Jinja2‑шаблон для просмотра сырых данных по таблицам accounts, categories, transactions, budgets через /db_view.

scripts/clear_db.py — консольный скрипт, полностью очищающий основные таблицы БД (без изменения схемы).

Схема базы данных (SQLite myfinance.db)

Основные таблицы: accounts, categories, transactions, budgets.
(Описание полей остаётся как в предыдущей версии: accounts с name, type, currency, is_active; categories с name, type, parent_id; transactions с account_id, category_id, amount_minor, currency, dt, kind и пр.; budgets с периодом и amount_minor.)

API

Схемы описаны в api/schemas.py (Pydantic v2). Основные роутеры: api/accounts.py, api/categories.py, api/transactions.py.

/accounts

GET /accounts → список счетов (List[AccountOut]), использует list_accounts(active_only=False) в сервисе.

POST /accounts → AccountOut (201), тело AccountCreate (name, type, currency); создаётся счёт с is_active=True.

/categories

GET /categories → список категорий (List[CategoryOut]), list_categories(type=None, active_only=False).

POST /categories → CategoryOut (201), тело CategoryCreate (name, type ∈ {"income","expense"}, parent_id).

/transactions

GET /transactions → List[TransactionOut], все транзакции, отсортированные по id.

POST /transactions →

kind = "income" → одна транзакция дохода;

kind = "expense" → одна транзакция расхода;

kind = "transfer" → две транзакции (списание и зачисление) как List[TransactionOut].

Тело TransactionCreate: account_id, category_id | None, amount_minor > 0, dt | None, description | None, currency = "RUB", kind ∈ {"income","expense","transfer"}, to_account_id (обязателен для transfer).

Логика по типу операции реализована в services/transactions.py.

Фронтенд (frontend/)

Стек: Vite + React + TypeScript + Tailwind CSS.

Основные файлы:

frontend/package.json — скрипты dev, build, preview.

frontend/vite.config.ts — конфигурация Vite.

frontend/tailwind.config.cjs, frontend/postcss.config.cjs — настройка Tailwind и PostCSS.

frontend/src/main.tsx — входной файл React, обёрнутый в BrowserRouter.

frontend/src/App.tsx — маршрутизация и подключение MainLayout.

Структура исходников:

src/api/ — функции для работы с FastAPI:

client.ts — общий HTTP‑клиент (apiGet, apiPost, API_BASE_URL = "http://localhost:8000");

accounts.ts — getAccounts, createAccount → /accounts;

(план) categories.ts → /categories, transactions.ts → /transactions.

src/components/ — общие компоненты.

components/layout/MainLayout.tsx — новый основной layout: светлый левый сайдбар, верхний бар внутри контента, область страниц.

src/pages/ — страницы:

Dashboard/index.tsx — заглушка для дашборда (будут карточки метрик и графики).

Accounts/index.tsx — сетка карточек счетов. При монтировании вызывает getAccounts() и отображает для каждого счёта: name, type, currency, is_active, id.

Categories/index.tsx — заглушка для списка категорий.

Transactions/index.tsx — заглушка для списка транзакций.

src/index.css — базовые стили + подключение Tailwind (светлая тема).

Роутинг (React Router):

/ → редирект на /dashboard;

/dashboard → DashboardPage;

/accounts → AccountsPage;

/categories → CategoriesPage;

/transactions → TransactionsPage.

Все страницы рендерятся внутри MainLayout.

Визуальная концепция

Светлый финтех‑дашборд: левый сайдбар, верхняя панель, контент в виде карточек и списков.

Accounts — карточки счетов с плавными градиентами в духе банковских приложений.

План: аналогично оформить Dashboard (карточки «Рабочий баланс», «Статус накоплений», краткая сводка транзакций) и далее страницы категорий и транзакций.

TODO (ближайшие шаги)

Фронтенд

Accounts

Добавить модальное окно «Новый счёт» поверх POST /accounts (поля: name, type, currency).

После успешного создания обновлять список без перезагрузки страницы.

Обработать ошибки API (валидация, сетевые ошибки) и показывать их в UI.

Categories

Реализовать модуль src/api/categories.ts (getCategories, createCategory → /categories).

Сделать список/карточки категорий на странице Categories.

Добавить форму создания категории (name, type, parent_id).

Подготовить основу для отображения категорий деревом (иерархия по parent_id).

Transactions

Реализовать модуль src/api/transactions.ts (getTransactions, createTransaction → /transactions).

Сделать страницу транзакций (список, базовые колонки: дата, счёт, категория, сумма, тип).

Добавить фильтры по дате, счёту, категории, типу операции (income/expense/transfer).

Реализовать форму создания транзакций с переключателем вида операции и выбором счёта/счётов.

Dashboard

Добавить запросы для агрегированных данных (баланс по счетам, суммы доходов/расходов за период).

Нарисовать карточки метрик и один‑два графика (например, расходы по дням и распределение по категориям).

Бэкенд

Расширить GET /transactions параметрами фильтрации (дата от/до, account_id, category_id, kind).

Добавить простые агрегирующие эндпоинты для дашборда (баланс по счетам, суммы доход/расход за период).

Инфраструктура

Поддерживать в актуальном состоянии конфигурацию backend+frontend в PyCharm.

Добавить README по запуску проекта (uvicorn + npm run dev / compound‑конфигурация).