MyFinance
Личный финансовый трекер для учёта счетов, категорий и транзакций.
Backend на FastAPI + SQLAlchemy/Alembic, frontend на React + Vite + TypeScript + Tailwind CSS.

Возможности
Управление счетами:

банковские карты, наличные, брокерские и любые другие типы;

хранение маски номера карты (формат **** 1234), без сохранения полного номера.

Категории доходов и расходов:

иерархия категорий (родитель → дочерние);

разделение на типы: доход / расход.

Транзакции:

доход, расход, перевод между счетами;

сумма в минимальных единицах (копейки), валюта, дата/время, описание, категория.

UI:

современный светлый интерфейс;

страница «Мои счета» с карточками (значок МИР/₽, название, маска номера, валюта, статус);

отдельные страницы для категорий и транзакций (в разработке).

API:

REST‑эндпоинты для счетов, категорий и транзакций;

автогенерация Swagger‑документации FastAPI по адресу /docs.

Стек технологий
Backend

Python, FastAPI

SQLAlchemy (ORM)

Alembic (миграции)

SQLite (по умолчанию)

Frontend

React

Vite

TypeScript

Tailwind CSS

Прочее

Monorepo: backend и frontend в одном репозитории

Pydantic v2 для схем API

Структура проекта
text
MyFinance/
  ├── main.py                # точка входа FastAPI-приложения
  ├── alembic.ini            # конфигурация Alembic
  ├── myfinance.db           # SQLite-база (dev)
  ├── Project.txt            # заметки по проекту

  ├── api/                   # HTTP-ручки FastAPI
  │   ├── __init__.py
  │   ├── accounts.py        # /accounts: GET/POST
  │   ├── categories.py      # /categories
  │   ├── transactions.py    # /transactions
  │   └── schemas.py         # Pydantic-схемы Account/Category/Transaction

  ├── db/
  │   ├── __init__.py
  │   ├── base.py            # engine, SessionLocal, Base
  │   └── session_scope.py   # контекстный менеджер для сессий

  ├── migrations/            # Alembic-миграции
  │   ├── env.py
  │   └── versions/
  │       ├── a26138cee6f3_init_schema.py
  │       └── 86d4aeea00b5_add_card_number_to_accounts.py

  ├── models/                # ORM-модели SQLAlchemy
  │   ├── __init__.py
  │   ├── account.py         # Account: счета
  │   ├── category.py        # Category: категории
  │   ├── transaction.py     # Transaction: проводки
  │   └── budget.py          # Budget: бюджеты по категориям (задел на будущее)

  ├── services/              # бизнес-логика
  │   ├── __init__.py
  │   ├── accounts.py        # create_account, list_accounts и т.д.
  │   ├── categories.py
  │   └── transactions.py

  ├── templates/
  │   └── dbview.html        # упрощённый HTML-вид для просмотра данных

  ├── scripts/
  │   ├── clear_db.py        # очистка данных в БД
  │   └── check_category_sums.py

  └── frontend/              # React/Vite frontend
      ├── index.html
      ├── package.json
      ├── vite.config.ts
      ├── tailwind.config.cjs
      ├── postcss.config.cjs
      └── src/
          ├── main.tsx
          ├── App.tsx
          ├── index.css
          ├── api/
          │   ├── client.ts        # apiGet/apiPost с baseURL на FastAPI
          │   ├── accounts.ts      # типы Account, AccountCreate и функции get/create
          │   ├── categories.ts
          │   └── transactions.ts
          ├── components/
          │   └── layout/
          │       └── MainLayout.tsx
          └── pages/
              ├── Dashboard/
              │   └── index.tsx
              ├── Accounts/
              │   └── index.tsx    # карточки счетов с маской card_number
              ├── Categories/
              │   └── index.tsx
              └── Transactions/
                  └── index.tsx
Доменная модель
Accounts (счета)
Таблица accounts:

id: int — идентификатор.

name: str — название счёта (например, «Карта Tinkoff Андрей»).

type: str — тип ("card", "cash", и т.п.).

currency: str — код валюты (например, "RUB").

is_active: bool — активен ли счёт.

card_number: str | None — маска номера карты в формате **** 1234, полный номер никогда не сохраняется.

created_at: datetime — дата создания.

Categories (категории)
Таблица categories:

id: int

name: str

type: str — "income" или "expense".

parent_id: int | None — ссылка на родительскую категорию.

is_active: bool.

Transactions (транзакции)
Таблица transactions:

id: int

account_id: int — счёт.

category_id: int | None — категория дохода/расхода.

amount_minor: int — сумма в минимальных единицах (копейки).

currency: str — код валюты.

dt: datetime — дата/время.

description: str | None — описание.

transfer_group_id: int | None — группировка для переводов.

created_at: datetime.

API (кратко)
Примеры основных ручек (полное описание смотри в /docs):

Счета
GET /accounts
Возвращает список счетов AccountOut[].

POST /accounts
Создаёт счёт.

Тело запроса (AccountCreate):

text
{
  "name": "Карта Tinkoff Андрей",
  "type": "card",
  "currency": "RUB",
  "card_number": "5536 91- -  - - - -  1234"   // на бэке превратится в "**** 1234"
}
Ответ (AccountOut):

text
{
  "id": 1,
  "name": "Карта Tinkoff Андрей",
  "type": "card",
  "currency": "RUB",
  "is_active": true,
  "card_number": "**** 1234",
  "created_at": "2026-01-25T08:30:00"
}

Категории и транзакции реализованы в аналогичном стиле (CategoryCreate/Out, TransactionCreate/Out).

Быстрый старт (локальная разработка)
Клонировать репозиторий

bash
git clone https://github.com/andrewarb-ops/MyFinance.git
cd MyFinance
Backend

bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

alembic upgrade head      # применить миграции

uvicorn main:app --reload
FastAPI будет доступен по адресу http://localhost:8000, Swagger — http://localhost:8000/docs.

Frontend

bash
cd frontend
npm install
npm run dev
Интерфейс доступен по адресу http://localhost:5173.

Как вносить изменения в модель данных
Меняем ORM‑модель в models/ (например, добавляем поле в Account).

Создаём Alembic‑миграцию:

bash
alembic revision -m "описание изменения"
# правим upgrade()/downgrade()
alembic upgrade head
Обновляем Pydantic‑схемы в api/schemas.py.

Обновляем сервисы (services/*.py) и обработчики в api/*.py.

Обновляем типы и API‑клиенты на фронте (frontend/src/api/*.ts).

Обновляем компоненты React/страницы, если нужно.

Планы по развитию
Страница деталей счёта с историей транзакций и быстрыми фильтрами.

Гибкая аналитика по категориям (диаграммы, топ‑категории за период).

Бюджеты по категориям и уведомления о перерасходе.

Импорт выписок из банков/CSV.