MyFinance — это личный финансовый трекер для учёта счетов, категорий и транзакций.
​
Приложение позволяет фиксировать доходы, расходы и переводы между счетами, строить структуру категорий и видеть текущее состояние финансов.
​

Основные возможности
Управление счетами: банковские карты, наличные, брокерские и любые произвольные типы.
​

Хранение только маски номера карты (формат **** 1234), полный номер нигде не сохраняется.
​

Иерархические категории доходов и расходов (родитель → дочерние) с типами income/expense.
​

Транзакции трёх типов: доход, расход, перевод между счетами.
​

Хранение суммы в минимальных единицах (копейки), валюты, даты/времени, описания, привязки к категории.
​

Группировка переводов по общему идентификатору transfer_group_id.
​

Светлый современный UI, страницы «Мои счета», «Категории», «Транзакции», базовый дашборд.
​

Swagger‑документация API по адресу /docs.
​

Стек технологий
Backend: Python, FastAPI, SQLAlchemy (ORM), Alembic (миграции), SQLite по умолчанию.
​

Frontend: React, Vite, TypeScript, Tailwind CSS.
​

Прочее: Pydantic v2 для схем, monorepo (backend и frontend в одном репозитории), простой HTML‑просмотр содержимого БД.
​

Архитектура и структура каталогов
Корень репозитория:
​

text
myFinance/
├── api/          # HTTP‑слой FastAPI
├── db/           # инфраструктура БД (engine, сессии)
├── models/       # ORM‑модели
├── services/     # бизнес-логика
├── migrations/   # Alembic-миграции
├── templates/    # HTML-шаблоны (db_view)
├── frontend/     # клиентское приложение (React + Vite)
├── main.py       # точка входа backend
└── myfinance.db  # SQLite (dev)
Кратко по слоям:

api/ — роуты FastAPI: accounts.py, categories.py, transactions.py, Pydantic‑схемы в schemas.py.
​

db/ — создание engine, SessionLocal, базовый класс Base, контекст session_scope.
​

models/ — ORM‑модели: account.py, budget.py, category.py, transaction.py.
​

services/ — бизнес‑методы для работы с сущностями (CRUD, валидации, маскирование карт, расчёт баланса).
​

migrations/ — конфиг Alembic, env, шаблоны, версии миграций (init_schema, добавление card_number).
​

templates/db_view.html — простая HTML‑страница для просмотра таблиц в БД (debug‑view).
​

frontend/ — Vite‑приложение: страницы Accounts, Categories, Transactions, Dashboard, общий MainLayout.
​

Модель данных
Основные таблицы БД:
​

accounts — счета: id, name, type, currency, is_active, created_at, card_number (маска).
​

categories — категории: id, name, type (income/expense), parent_id, is_active.
​

transactions — транзакции: id, account_id, category_id, amount_minor, currency, dt, description, transfer_group_id, created_at.
​

budgets — бюджет по категории и периоду: category_id, period_start, period_end, amount_minor.
​

Все суммы хранятся в целых числах в минимальных единицах (копейки) для избежания ошибок округления.
​

Установка и запуск (локально)
1. Предварительные требования
Установленный Python 3.x.

Установленный Node.js (с npm или pnpm/yarn) для фронтенда.

(Конкретные версии можно добавить, когда определишься, но для FastAPI + Vite подойдут актуальные LTS.)

2. Клонирование репозитория
bash
git clone <url-репозитория> myFinance
cd myFinance
3. Настройка backend
Создать и активировать виртуальное окружение (пример для venv):

bash
python -m venv .venv
source .venv/bin/activate   # Linux/macOS
.venv\Scripts\activate      # Windows
Установить зависимости (предполагается requirements.txt или pyproject.toml; если файла нет — стоит его добавить).

Применить миграции Alembic:

bash
alembic upgrade head
Запустить FastAPI‑приложение (пример с uvicorn):

bash
uvicorn main:app --reload
Проверить, что API доступен по http://localhost:8000, а Swagger — по http://localhost:8000/docs.
​

4. Настройка frontend
bash
cd frontend
npm install        # или pnpm install / yarn
npm run dev        # запуск Vite dev-сервера
По умолчанию Vite поднимается на http://localhost:5173 (порт можно изменить в конфиге).
​
Фронтенд ожидает, что backend доступен по http://localhost:8000; при необходимости нужно поправить базовый URL в src/api/client.ts.
​

Как пользоваться приложением
Страница «Счета»
Создай новый счёт через модальное окно: укажи название, тип (карта, наличные и т.п.), валюту и маску номера карты.
​

В списке отображаются карточки: иконка (МИР/₽), имя, маска, валюта, статус активности.
​

Счёт можно редактировать (включая деактивацию) и удалять через модалки EditAccountModal и кнопки на карточке.
​

Категории
На странице Categories доступны операции добавления, редактирования и отключения категорий.
​

Поддерживается иерархия: можно задавать parent_id, чтобы строить дерево расходов и доходов.
​

Транзакции
Страница Transactions показывает список операций с фильтрами (при необходимости можно доработать при отображении).
​

При создании указываются счёт, категория (для доходов/расходов), сумма, валюта, дата/время и описание.
​

Перевод между счетами оформляется как пара связанных транзакций с общим transfer_group_id.
​

Дашборд
Страница Dashboard предназначена для агрегированной аналитики (балансы по счетам, расходы по категориям и т.п.) и помечена как «в разработке».
​

На текущем этапе сюда можно выводить базовые суммы и графики по данным транзакций.
​

Внутреннее устройство backend
services/accounts.py — создание, чтение, обновление и удаление счетов, маскирование номера карты.
​

services/categories.py — CRUD‑операции по категориям, контроль типа (income/expense), обработка иерархии.
​

services/transactions.py — добавление доходов, расходов и переводов, расчёт балансов по счетам.
​

check_category_sums.py, clear_db.py, print_schema.py, tree.py — вспомогательные скрипты для отладки и обслуживания БД.
​

Планы развития (примерный раздел)
Добавить полноценный дашборд: диаграммы расходов по категориям, динамика баланса, план/факт по бюджетам.

Ввести авторизацию и много‑пользовательский режим.

Расширить систему бюджетов и добавить оповещения при превышении лимитов.

Экспорт/импорт операций (CSV, возможно интеграция с банками).